<!DOCTYPE html>
<html>
	<head>
		<title>Hello World!</title>

		<!-- 3rd party things -->
		<link rel="stylesheet" type="text/css" href="vendor/font-awesome/css/font-awesome.css">
		
		<!-- Pony things -->
		<link rel="stylesheet" type="text/css" href="style/main.css">
		<script src="filedialog.js"></script>
		<script src="filemanager.js"></script>
		<script src="jobhandle.js"></script>
		<script src="jquery.js"></script>
		<script src="remotefile.js"></script>
		<script src="codeeditorview.js"></script>
		<script src="menu.js"></script>
		<script src="settings.js"></script>
		<script src="../common/type.js"></script>
		<script src="../common/tools.js"></script>
		<script src="../common/filetype.js"></script>

		<script src="vendor/ace/src-noconflict/ace.js"></script>
	</head>
	<body>
		<!--
			Overlay container
		-->
		<div class="overlay-layer">
		</div>
	
		<!--
			Main layout
		-->
		<div class="main-layout">
			<div class="left-bar">
			</div>
			<div class="view-stack">
			</div>
		</div>

		<!--
			Template: File Open / Save dialog
		-->		
		<template id="file-dialog-template">
			<div class="overlay">
				<div class="dialog file-dialog">
					<span class="title">
						Open File
					</span>
					<div class="content">
						<div class="top-bar">
							<input class="path" type="text">
							<button class="up fa fa-level-up" title="Parent Directory"></button>
							<button class="refresh fa fa-refresh" title="Refresh"></button>
						</div>
						<div class="columns">
							<div class="folders">
								<ul>
									<li><span class="head">Favorite Locations</span> <ul class="favorites">
										<li class="add-favorite"><i class="fa fa-plus-circle"></i> Add Favorite</li>
									</ul></li>
								</ul>
							</div>
							<div class="files"></div>
						</div>
						<div class="button-bar">
							<button class="cancel">Cancel</button>
							<button class="ok">OK</button>
						</div>
					</div>
				</div>
			</div>
		</template>
		
		<!--
			Template: Progress bar for loading views
		-->
		<template id="view-loader-template">
			<div class="view-loader">
				<i class="fa fa-cog fa-spin"></i>
				<div class="progress-bar">
					<div class="fill"></div>
				</div>
			</div>
		</template>
	</body>
	
	<script>
		var remote = require('remote');
		var Menu = remote.require('menu');
		var MenuItem = remote.require('menu-item');
		var ipc = require( 'ipc' );

		var mainMenuTemplate = [ 
			{
				label: 'PonyEdit 2',
				submenu: [
					{
						label: 'Quit',
						accelerator: 'Command+Q',
						click: function() {
							remote.require( 'app' ).quit();
						}
					},
					{
						label: 'Show Developer Console',
						accelerator: 'Alt+Command+I',
						click: function() {
							require( 'ipc' ).send( 'show-console' );
						}
					},
				],
			}, {
				label: 'File',
				submenu: [
					{
						label: 'Open File',
						accelerator: 'Command+O',
						click: function() {
							new FileDialog( {
								onDone: function( filenames ) {
									if ( filenames.length > 0 ) {
										var file = FileManager.open( filenames[0] );
										new CodeEditorView( file, $( '.view-stack' ) );								
									}
								}
							} );							
						}
					},
					{ label: 'Do other stuff' },
				],
			}
		];
		var mainMenu = Menu.buildFromTemplate( mainMenuTemplate );
		Menu.setApplicationMenu( mainMenu );
	</script>
</html>
